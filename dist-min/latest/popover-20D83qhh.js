import{h as e,b as t,c as o}from"./utils-jzOyevx0.js";const i=new CSSStyleSheet;i.replaceSync("#popover {\n    --he-popover-borderColor: hsl(240 5.9% 90%);\n    --he-popover-borderRadius: 3px;\n\n    padding: 0;\n    inset: unset;\n    outline: none;\n    border: 1px solid var(--he-popover-borderColor);\n    border-radius: var(--he-popover-borderRadius);\n    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);\n}\n\n");class r extends HTMLElement{static observedAttributes=["attach","position","open","trigger","anchor","dismiss"];$popover;$attach;$anchor;internals;constructor(){super();let e=this.attachShadow({mode:"open"});this.$popover=document.createElement("div"),this.$popover.id="popover",this.$popover.popover="";const t=document.createElement("slot");t.name="content",this.$popover.append(t),e.append(this.$popover),e.adoptedStyleSheets=[i],this.internals=this.attachInternals()}set anchor(e){e?this.setAttribute("anchor",e):this.removeAttribute("anchor")}get anchor(){return this.getAttribute("anchor")}set dismiss(e){e?this.setAttribute("dismiss",e):this.removeAttribute("dismiss")}get dismiss(){return this.getAttribute("dismiss")}set anchorElement(e){this.$anchor=e}get anchorElement(){return this.$anchor}set open(e){e?this.setAttribute("open",""):this.removeAttribute("open")}get open(){return null!==this.getAttribute("open")}attributeChangedCallback(e,t,o){switch(e){case"open":null!=o?this.$popover.showPopover():this.$popover.hidePopover();break;case"attach":let e=document.querySelector(o);if(null==e)throw new Error("Attachment element not found!");this._attachToElement(e);break;case"anchor":const t=document.querySelector(o);if(null==t)throw new Error(`Anchor element "${o}" not found!`);this.$anchor=t;break;case"dismiss":this.$popover.popover=o||""}}connectedCallback(){this.$popover.addEventListener("beforetoggle",(e=>this._handleBeforeToggledPopover.bind(this)(e))),this.$popover.addEventListener("toggle",(e=>this._handleToggledPopover.bind(this)(e)))}getSize(){if(this.open){let e=this.$popover.getBoundingClientRect();return[e.width,e.height]}let e=this.getAttribute("position");this.setAttribute("position","offscreen"),this.open=!0;let t=this.$popover.getBoundingClientRect(),o=t.width,i=t.height;return this.open=!1,this.setAttribute("position",e),[o,i]}hidePopover(){this.open=!1}showPopover(){this.open=!0}toggle(){return this.togglePopover(),this}togglePopover(){return this.open=!this.open,this}_attachToElement(e){const t=this.getAttribute("trigger")??"click";e.addEventListener(t,(e=>this.triggeredCallback.bind(this)(e))),this.$attach=e}_handleBeforeToggledPopover(e){"open"===e.newState?this.$popover.style.visibility="hidden":this.removeAttribute("open")}_handleToggledPopover(i){if("open"===i.newState){if(this.$anchor){let o="bottom-left";e(this)<this.$popover.offsetHeight+20&&(o="top-left");const i=this.getAttribute("position")??o;t(this.$popover,this.$anchor,i,3)}this.$popover.style.visibility=""}else o()}}customElements.get("he-popover")||customElements.define("he-popover",r);
